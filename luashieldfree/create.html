<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Lua Uploader</title>
  <style>
    body { font-family: Arial, background: #111; color: #eee; padding: 40px; text-align: center; }
    textarea, button { width: 100%; max-width: 600px; padding: 12px; margin: 10px auto; display: block; border-radius: 6px; border: none; }
    button { background: #222; color: #fff; cursor: pointer; }
    textarea { height: 200px; resize: vertical; }
  </style>
</head>
<body>

<h2>Lua to GitHub</h2>
<textarea id="code">print("Hello from bot!")</textarea>
<button onclick="upload()">Upload to GitHub</button>
<p id="result"></p>

<script>
const GITHUB_TOKEN = "__GITHUB_TOKEN__";
const GITHUB_USERNAME = "__GITHUB_USERNAME__";
const GITHUB_REPO = "__GITHUB_REPO__";

async function upload() {
  const code = document.getElementById("code").value;
  const path = `luashieldfree/${Math.random().toString(36).substring(2, 12)}.lua`;
  const apiUrl = `https://api.github.com/repos/${GITHUB_USERNAME}/${GITHUB_REPO}/contents/${path}`;
  const result = document.getElementById("result");

  try {
    const res = await fetch(apiUrl, {
      method: "PUT",
      headers: {
        Authorization: `token ${GITHUB_TOKEN}`,
        "Content-Type": "application/json",
        "Accept": "application/vnd.github.v3+json"
      },
      body: JSON.stringify({
        message: `Upload ${path}`,
        content: btoa(unescape(encodeURIComponent(code)))
      })
    });

    const data = await res.json();

    if (res.ok) {
      const raw = `https://raw.githubusercontent.com/${GITHUB_USERNAME}/${GITHUB_REPO}/main/${path}`;
      result.style.color = "lightgreen";
      result.innerHTML = `✅ File uploaded!<br><code>loadstring(game:HttpGet("${raw}"))()</code>`;
    } else {
      result.style.color = "red";
      result.textContent = "❌ GitHub Error: " + data.message;
    }
  } catch (e) {
    result.style.color = "red";
    result.textContent = "❌ Network Error: " + e.message;
  }
}
</script>

</body>
</html>
