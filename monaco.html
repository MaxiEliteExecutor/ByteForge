<script>
  require(['vs/editor/editor.main'], function () {
    monaco.languages.register({ id: 'lua' });

    monaco.languages.setMonarchTokensProvider('lua', {
      tokenizer: {
        root: [
          [/[a-zA-Z_]\w*/, {
            cases: {
              'function|end|if|then|else|elseif|for|in|do|while|repeat|until|return|local|and|or|not': 'keyword',
              '@default': 'identifier'
            }
          }],
          { include: '@whitespace' },
          [/\d+(\.\d+)?/, 'number'],
          [/".*?"/, 'string'],
          [/'[^']*'/, 'string'],
          [/--.*/, 'comment'],
        ],
        whitespace: [
          [/[ \t\r\n]+/, 'white'],
        ]
      }
    });

    monaco.editor.defineTheme('dark-lua-theme', {
      base: 'vs-dark',
      inherit: true,
      rules: [
        { token: 'keyword', foreground: 'C586C0' },
        { token: 'number', foreground: 'B5CEA8' },
        { token: 'string', foreground: 'CE9178' },
        { token: 'comment', foreground: '6A9955' },
      ],
      colors: {
        'editor.background': '#0F0F10'
      }
    });

    monaco.editor.create(document.getElementById('container'), {
      value: '--- ByteForge Exec---',
      language: 'lua',
      theme: 'dark-lua-theme'
    });
  });
</script>
